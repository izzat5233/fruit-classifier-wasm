<div class="row">
    <div class="col">
        <h5>Training Data</h5>
        <div class="btn-group">
            <p class="btn btn-light" id="inputTrainingDataButton"
               onclick="network.promptInputTrainingData()">Browse Input File</p>
            <p class="btn btn-light" id="outputTrainingDataButton"
               onclick="network.promptOutputTrainingData()">Browse Output File</p>
        </div>
        <div class="d-inline-block">
            <p class="btn btn-primary px-2" id="prepareTrainingDataButton"
               onclick="network.prepareTrainingData()">Load</p>
            <p class="btn btn-danger px-2" id="clearTrainingDataButton"
               onclick="onClearTrainingData()">Clear</p>
        </div>
        <div class="row">
            <table class="col table table-bordered">
                <thead id="trainInPreviewThead"></thead>
                <tbody id="trainInPreviewTbody"></tbody>
            </table>
            <table class="col table table-bordered">
                <thead id="trainOutPreviewThead"></thead>
                <tbody id="trainOutPreviewTbody"></tbody>
            </table>
        </div>
    </div>
    <div class="col">
        <h5>Testing Data</h5>
        <div class="btn-group">
            <p class="btn btn-light" id="inputTestingDataButton"
               onclick="network.promptInputTestingData()">Browse Input File</p>
            <p class="btn btn-light" id="outputTestingDataButton"
               onclick="network.promptOutputTestingData()">Browse Output File</p>
        </div>
        <div class="d-inline-block">
            <p class="btn btn-primary px-2" id="prepareTestingDataButton"
               onclick="network.prepareTestingData()">Load</p>
            <p class="btn btn-danger px-2" id="clearTestingDataButton"
               onclick="onClearTestingData()">Clear</p>
        </div>
        <div class="row">
            <table class="col table table-bordered">
                <thead id="testInPreviewThead"></thead>
                <tbody id="testInPreviewTbody"></tbody>
            </table>
            <table class="col table table-bordered">
                <thead id="testOutPreviewThead"></thead>
                <tbody id="testOutPreviewTbody"></tbody>
            </table>
        </div>
    </div>
</div>
<script src="js/table.js"></script>
<script>
    function onDataFileSet(element, filename, dataSize) {
        element.setAttribute('data-size', dataSize);
        element.innerHTML = filename + "<br>" + "Valid Rows: " + Number(dataSize);
        element.classList.add('active');
    }

    function onInputTrainingFileSet(filename, dataSize) {
        onDataFileSet(document.getElementById('inputTrainingDataButton'), filename, dataSize);
    }

    function onOutputTrainingFileSet(filename, dataSize) {
        onDataFileSet(document.getElementById('outputTrainingDataButton'), filename, dataSize);
    }

    function onInputTestingFileSet(filename, dataSize) {
        onDataFileSet(document.getElementById('inputTestingDataButton'), filename, dataSize);
    }

    function onOutputTestingFileSet(filename, dataSize) {
        onDataFileSet(document.getElementById('outputTestingDataButton'), filename, dataSize);
    }

    function onTrainingDataPrepared(dataSize) {
        const previewSize = onPreviewTrainingData();
        const html =
            "<h5>Loaded " + dataSize + " rows</h5>" +
            "<h5>" + previewSize + " preview rows are shown</h5>";
        showSimpleToast(html);
    }

    function onTestingDataPrepared(dataSize) {
        const previewSize = onPreviewTestingData();
        const html =
            "<h5>Loaded " + dataSize + " rows</h5>" +
            "<h5>" + previewSize + " preview rows are shown</h5>";
        showSimpleToast(html);
    }

    function onClearFileData(input, output) {
        input.removeAttribute('data-size');
        input.classList.remove('active');
        input.innerHTML = "Browse Input File";
        output.removeAttribute('data-size');
        output.classList.remove('active');
        output.innerHTML = "Browse Output File";
    }

    function clearTrainPreviewTable() {
        document.getElementById('trainInPreviewThead').innerHTML = "";
        document.getElementById('trainInPreviewTbody').innerHTML = "";
        document.getElementById('trainOutPreviewThead').innerHTML = "";
        document.getElementById('trainOutPreviewTbody').innerHTML = "";
    }

    function clearTestPreviewTable() {
        document.getElementById('testInPreviewThead').innerHTML = "";
        document.getElementById('testInPreviewTbody').innerHTML = "";
        document.getElementById('testOutPreviewThead').innerHTML = "";
        document.getElementById('testOutPreviewTbody').innerHTML = "";
    }

    function onClearTrainingData() {
        const input = document.getElementById('inputTrainingDataButton');
        const output = document.getElementById('outputTrainingDataButton');
        onClearFileData(input, output);
        clearTrainPreviewTable()
    }

    function onClearTestingData() {
        const input = document.getElementById('inputTestingDataButton');
        const output = document.getElementById('outputTestingDataButton');
        onClearFileData(input, output);
        clearTestPreviewTable()
    }

    function onPreviewTrainingData() {
        clearTrainPreviewTable()
        let input = network.getTrainInPreview();
        setupTableHeader("#trainInPreviewThead", input.get(0).size(), "Input");
        fillNumTable("#trainInPreviewTbody", input);
        let output = network.getTrainOutPreview();
        setupTableHeader("#trainOutPreviewThead", output.get(0).size(), "Output");
        fillNumTable("#trainOutPreviewTbody", output);
        return input.size();
    }

    function onPreviewTestingData() {
        clearTestPreviewTable()
        let input = network.getTestInPreview();
        setupTableHeader("#testInPreviewThead", input.get(0).size(), "Input");
        fillNumTable("#testInPreviewTbody", input);
        let output = network.getTestOutPreview();
        setupTableHeader("#testOutPreviewThead", output.get(0).size(), "Output");
        fillNumTable("#testOutPreviewTbody", output);
        return input.size();
    }
</script>