<div class="row">
    <div class="col">
        <h5>Training Data</h5>
        <div class="btn-group">
            <p class="btn btn-light" id="inputTrainingDataButton"
               onclick="network.promptInputTrainingData()">Browse Input File</p>
            <p class="btn btn-light" id="outputTrainingDataButton"
               onclick="network.promptOutputTrainingData()">Browse Output File</p>
        </div>
        <div class="d-inline-block">
            <p class="btn btn-primary px-2" id="prepareTrainingDataButton"
               onclick="network.prepareTrainingData()">Load</p>
            <p class="btn btn-danger px-2" id="clearTrainingDataButton"
               onclick="onClearTrainingData()">Clear</p>
        </div>
        <div class="row justify-content-center">
            <div class="col">
                <table class="table table-bordered">
                    <thead id="trainPreviewThead"></thead>
                    <tbody id="trainPreviewTbody"></tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="col">
        <h5>Testing Data</h5>
        <div class="btn-group">
            <p class="btn btn-light" id="inputTestingDataButton"
               onclick="network.promptInputTestingData()">Browse Input File</p>
            <p class="btn btn-light" id="outputTestingDataButton"
               onclick="network.promptOutputTestingData()">Browse Output File</p>
        </div>
        <div class="d-inline-block">
            <p class="btn btn-primary px-2" id="prepareTestingDataButton"
               onclick="network.prepareTestingData()">Load</p>
            <p class="btn btn-danger px-2" id="clearTestingDataButton"
               onclick="onClearTestingData()">Clear</p>
        </div>
        <div class="row justify-content-center">
            <div class="col">
                <table class="table table-bordered">
                    <thead id="testPreviewThead"></thead>
                    <tbody id="testPreviewTbody"></tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<script>
    function onDataFileSet(element, filename, dataSize) {
        element.setAttribute('data-size', dataSize);
        element.innerHTML = filename + "<br>" + "Valid Rows: " + Number(dataSize);
        element.classList.add('active');
    }

    function onInputTrainingFileSet(filename, dataSize) {
        onDataFileSet(document.getElementById('inputTrainingDataButton'), filename, dataSize);
    }

    function onOutputTrainingFileSet(filename, dataSize) {
        onDataFileSet(document.getElementById('outputTrainingDataButton'), filename, dataSize);
    }

    function onInputTestingFileSet(filename, dataSize) {
        onDataFileSet(document.getElementById('inputTestingDataButton'), filename, dataSize);
    }

    function onOutputTestingFileSet(filename, dataSize) {
        onDataFileSet(document.getElementById('outputTestingDataButton'), filename, dataSize);
    }

    function onTrainingDataPrepared(dataSize) {
        const previewSize = onPreviewTrainingData();
        const html =
            "<h5>Loaded " + dataSize + " rows</h5>" +
            "<h5>" + previewSize + " preview rows are shown</h5>";
        showSimpleToast(html);
    }

    function onTestingDataPrepared(dataSize) {
        const previewSize = onPreviewTestingData();
        const html =
            "<h5>Loaded " + dataSize + " rows</h5>" +
            "<h5>" + previewSize + " preview rows are shown</h5>";
        showSimpleToast(html);
    }

    function onClearFileData(input, output) {
        input.removeAttribute('data-size');
        input.classList.remove('active');
        input.innerHTML = "Browse Input File";
        output.removeAttribute('data-size');
        output.classList.remove('active');
        output.innerHTML = "Browse Output File";
    }

    function clearTrainPreviewTable() {
        document.getElementById('trainPreviewThead').innerHTML = "";
        document.getElementById('trainPreviewTbody').innerHTML = "";
    }

    function clearTestPreviewTable() {
        document.getElementById('testPreviewThead').innerHTML = "";
        document.getElementById('testPreviewTbody').innerHTML = "";
    }

    function onClearTrainingData() {
        const input = document.getElementById('inputTrainingDataButton');
        const output = document.getElementById('outputTrainingDataButton');
        onClearFileData(input, output);
        clearTrainPreviewTable()
    }

    function onClearTestingData() {
        const input = document.getElementById('inputTestingDataButton');
        const output = document.getElementById('outputTestingDataButton');
        onClearFileData(input, output);
        clearTestPreviewTable()
    }

    function onPreviewTrainingData() {
        clearTrainPreviewTable()

        let input = network.getTrainInPreview();
        setupTableHeader("#trainPreviewThead", input.get(0).size(), "Input");
        fillNumTable("#trainPreviewTbody", input);

        let output = network.getTrainOutPreview();
        setupTableHeader("#trainPreviewThead", output.get(0).size(), "Output");
        fillNumTable("#trainPreviewTbody", output);

        return input.size();
    }

    function onPreviewTestingData() {
        clearTestPreviewTable()

        let input = network.getTestInPreview();
        setupTableHeader("#testPreviewThead", input.get(0).size(), "Input");
        fillNumTable("#testPreviewTbody", input);

        let output = network.getTestOutPreview();
        setupTableHeader("#testPreviewThead", output.get(0).size(), "Output");
        fillNumTable("#testPreviewTbody", output);

        return input.size();
    }
</script>